{% load static %}
{% load crispy_forms_tags %}
{% include 'navbar.html' %}
<!DOCTYPE html>
<html>
<head>
	<link href="{% static 'js/jquery-ui-1.12.1/jquery-ui.min.css' %}" rel="stylesheet">
	<link href="{% static 'js/jquery-ui-1.12.1/jquery-ui.structure.min.css' %}" rel="stylesheet">
	<link href="{% static 'js/jquery-ui-1.12.1/jquery-ui.theme.min.css' %}" rel="stylesheet">
	<link rel="shortcut icon" type="image/png" href="{% static 'img/favicon.ico' %}">


	<script src="{% static 'js/jquery-3.6.0.min.js' %}"></script>
	<script src="{% static 'js/jquery-ui-1.12.1/jquery-ui.js' %}"></script>
	<script src="{% static 'js/myjs.js' %}"></script>
	<title>{{title}}</title>
	<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	<link href="{% static 'css/stylesheet.css' %}" rel="stylesheet">

	{% if messages %}
	<ul class="messages">
		{% for message in messages %}
		<li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
		{% endfor %}
	</ul>
	{% endif %}
</head>
<body>
	<div class="row">
		<div class="col-sm-9">
			<div class="myForm">
				<form method='POST' action=''>{% csrf_token %}
					<div class="row">
						<div class='col-sm-6'>
							<div class="form-row">
								<div class="form-group col-md-6">
									{{ form.invoice_date|as_crispy_field }}
									{{ form.name|as_crispy_field }}
								</div>
								<div class="form-group col-md-6">
									{{ form.invoice_number|as_crispy_field }}
									{{ form.phone_number|as_crispy_field }}
								</div>
							</div>
							<div class="form-row">
								<div class="form-group col-md-6">
									{{ form.line_one|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_one_quantity|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_one_unit_price|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_one_total_price|as_crispy_field }}
								</div>
							</div>

							<div class="form-row">
								<div class="form-group col-md-6">
									{{ form.line_two|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_two_quantity|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_two_unit_price|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_two_total_price|as_crispy_field }}
								</div>
							</div>

							<div class="form-row">
								<div class="form-group col-md-6">
									{{ form.line_three|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_three_quantity|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_three_unit_price|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_three_total_price|as_crispy_field }}
								</div>
							</div>

							<div class="form-row">
								<div class="form-group col-md-6">
									{{ form.line_four|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_four_quantity|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_four_unit_price|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_four_total_price|as_crispy_field }}
								</div>
							</div>

							<div class="form-row">
								<div class="form-group col-md-6">
									{{ form.line_five|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_five_quantity|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_five_unit_price|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_five_total_price|as_crispy_field }}
								</div>
							</div>


							<div class="form-row">
								<div class="form-group col-md-6">
									{{ form.line_six|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_six_quantity|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_six_unit_price|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_six_total_price|as_crispy_field }}
								</div>
							</div>


							<div class="form-row">
								<div class="form-group col-md-6">
									{{ form.line_seven|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_seven_quantity|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_seven_unit_price|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_seven_total_price|as_crispy_field }}
								</div>
							</div>


							<div class="form-row">
								<div class="form-group col-md-6">
									{{ form.line_eight|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_eight_quantity|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_eight_unit_price|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_eight_total_price|as_crispy_field }}
								</div>
							</div>

							<div class="form-row">
								<div class="form-group col-md-6">
									{{ form.line_nine|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_nine_quantity|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_nine_unit_price|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_nine_total_price|as_crispy_field }}
								</div>
							</div>


							<div class="form-row">
								<div class="form-group col-md-6">
									{{ form.line_ten|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_ten_quantity|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_ten_unit_price|as_crispy_field }}
								</div>
								<div class="form-group col-md-2">
									{{ form.line_ten_total_price|as_crispy_field }}
								</div>
							</div>

							<div class="form-row">
								<div class="form-group col-md-12">
									{{ form.invoice_type|as_crispy_field }}
								</div>
								<div class="form-group col-md-12">
									{{ form.total|as_crispy_field }}
								</div>
							</div>

							<button id='more-line' type="button" class="btn btn-primary">Show / Hide More Lines</button>

							<button type="submit" class="btn btn-primary">Save</button>

						</div>
					</div>
				</form>
			</div>
		</div>
		<div class="col-sm-3">
			<div>
				<div>
					<span class="text-muted">Recent invoices</span>
					<span class="badge badge-secondary badge-pill">{{total_invoices}}</span>
				</div>
				{% for instance in queryset %}
				<ul class="list-group mb-3">
					<li class="list-group-item d-flex justify-content-between lh-condensed">
						<div>
							<h6 class="my-0">{{instance.name}}</h6><br>
							<small class="text-muted">{{instance.invoice_date}}</small><br>
						</div>
						<div class="text-muted">â‚¹{{instance.total}}</div>
					</li>
				</ul>
				{% endfor %}
			</div>
		</div>
	</div>
{{ data|json_script:"hello-data" }}
{{ customer_data|json_script:"customer-data" }}
	<script type="text/javascript">
		var data = JSON.parse(document.getElementById('hello-data').textContent);
		var customer_data = JSON.parse(document.getElementById('customer-data').textContent);

		document.getElementById('id_name').onchange = function(event){
			var customer = customer_data.find(({customer_id}) => customer_id == event.target.value);
			document.getElementById('id_phone_number').value = customer && customer.ph_no ? customer.ph_no : "";
    };

		document.getElementById('id_line_one').onchange = function(event){
			var data1 = data.find(({product_number}) => product_number == event.target.value);
			document.getElementById('id_line_one_unit_price').value = data1 && data1.amount ? data1.amount : 0;
    };

		document.getElementById('id_line_two').onchange = function(event){
			var data2 = data.find(({product_number}) => product_number == event.target.value);
			document.getElementById('id_line_two_unit_price').value = data2 && data2.amount ? data2.amount : 0;
    };

		document.getElementById('id_line_three').onchange = function(event){
			var data3 = data.find(({product_number}) => product_number == event.target.value);
			document.getElementById('id_line_three_unit_price').value = data3 && data3.amount ? data3.amount : 0;
    };

		document.getElementById('id_line_four').onchange = function(event){
			var data4 = data.find(({product_number}) => product_number == event.target.value);
			document.getElementById('id_line_four_unit_price').value = data4 && data4.amount ? data4.amount : 0;
    };

		document.getElementById('id_line_five').onchange = function(event){
			var data5 = data.find(({product_number}) => product_number == event.target.value);
			document.getElementById('id_line_five_unit_price').value = data5 && data5.amount ? data5.amount : 0;
    };

		document.getElementById('id_line_six').onchange = function(event){
			var data6 = data.find(({product_number}) => product_number == event.target.value);
			document.getElementById('id_line_six_unit_price').value = data6 && data6.amount ? data6.amount : 0;
    };

		document.getElementById('id_line_seven').onchange = function(event){
			var data7 = data.find(({product_number}) => product_number == event.target.value);
			document.getElementById('id_line_seven_unit_price').value = data7 && data7.amount ? data7.amount : 0;
    };

		document.getElementById('id_line_eight').onchange = function(event){
			var data8 = data.find(({product_number}) => product_number == event.target.value);
			document.getElementById('id_line_eight_unit_price').value = data8 && data8.amount ? data8.amount : 0;
    };

		document.getElementById('id_line_nine').onchange = function(event){
			var data9 = data.find(({product_number}) => product_number == event.target.value);
			document.getElementById('id_line_nine_unit_price').value = data9 && data9.amount ? data9.amount : 0;
    };

		document.getElementById('id_line_ten').onchange = function(event){
			var data10 = data.find(({product_number}) => product_number == event.target.value);
			document.getElementById('id_line_ten_unit_price').value = data10 && data10.amount ? data10.amount : 0;
    };

	</script>
</body>
</html>
